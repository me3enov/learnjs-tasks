<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>6.10.4 Fix a function that loses "this"</title>
  <script src="scripts.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body class="body">
  <header class="header">
    <h1 class="header__title">6.10.4 Fix a function that loses "this"</h1>
    <p class="header__importance">importance: 5</p>
  </header>
  <main class="main">
    <section class="section">
      <div class="task">
        <h2 class="section__title">Tasks:</h2>
        <p class="section__text">
          The call to askPassword() in the code below should check the password
          and then call user.loginOk/loginFail depending on the answer.<br><br>

          But it leads to an error. Why?<br><br>

          Fix the highlighted line for everything to start working right (other lines are not to be changed).
        </p>
        <pre class="code-container"><code class="code_task">function askPassword(ok, fail) {
  let password = prompt("Password?", '');
  if (password == "rockstar") ok();
  else fail();
}

let user = {
  name: 'John',

  loginOk() {
    alert(`${this.name} logged in`);
  },

  loginFail() {
    alert(`${this.name} failed to log in`);
  },

};

askPassword(user.loginOk, user.loginFail);</code></pre>
      </div>
    </section>

    <section class="section">
      <div class="answer">
        <h2 class="section__title">Answer:</h2>
        <p class="section__text">Inside
          <a href="scripts.js" target="_blank" class="section__link">scripts.js</a> :
          <pre class="code-container"><code class="code">'use strict';

function askPassword(ok, fail) {
  const password = prompt("Password?", '');
  password == "rockstar" ?  ok() : fail();
}

let user = {
  name: 'Вася',

  loginOk() {
    alert(`${this.name} logged in`);
  },

  loginFail() {
    alert(`${this.name} failed to log in`);
  },

};

askPassword(user.loginOk.bind(user), user.loginFail.bind(user));</code></pre>
        </div>
    </section>
  </main>
  <footer class="footer">
    <a href="../6.10.3%20Function%20property%20after%20bind/index.html" class="footer__link">Previews Task</a>
    <a href="../6.10.5%20Partial%20application%20for%20login/index.html" class="footer__link">Next Task</a>
  </footer>
</body>
</html>
